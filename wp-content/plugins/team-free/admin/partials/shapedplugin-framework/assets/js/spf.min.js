!function(O,m,b,y){"use strict";var A=A||{};A.funcs={},A.vars={onloaded:!1,$body:O("body"),$window:O(m),$document:O(b),is_rtl:O("body").hasClass("rtl"),code_themes:[]},A.helper={uid:function(e){return(e||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(e){return(e+"").replace(/(\[|\-|\])/g,"\\$1")},name_nested_replace:function(e,t){var n=new RegExp("("+A.helper.preg_quote(t)+")\\[(\\d+)\\]","g");e.find(":radio").each(function(){(this.checked||this.orginal_checked)&&(this.orginal_checked=!0)}),e.each(function(e){O(this).find(":input").each(function(){this.name=this.name.replace(n,t+"["+e+"]"),this.orginal_checked&&(this.checked=!0)})})},debounce:function(i,s,a){var r;return function(){var e=this,t=arguments,n=a&&!r;clearTimeout(r),r=setTimeout(function(){r=null,a||i.apply(e,t)},s),n&&i.apply(e,t)}},get_cookie:function(e){var t,n,i=b.cookie,s=e+"=";if(i){if(-1===(n=i.indexOf("; "+s))){if(0!==(n=i.indexOf(s)))return null}else n+=2;return-1===(t=i.indexOf(";",n))&&(t=i.length),decodeURIComponent(i.substring(n+s.length,t))}},set_cookie:function(e,t,n,i,s,a){var r=new Date;n="object"==typeof n&&n.toGMTString?n.toGMTString():parseInt(n,10)?(r.setTime(r.getTime()+1e3*parseInt(n,10)),r.toGMTString()):"",b.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+n:"")+(i?"; path="+i:"")+(s?"; domain="+s:"")+(a?"; secure":"")},remove_cookie:function(e,t,n,i){A.helper.set_cookie(e,"",-1e3,t,n,i)}},O.fn.spf_clone=function(){for(var e=O.fn.clone.apply(this,arguments),t=this.find("select").add(this.filter("select")),n=e.find("select").add(e.filter("select")),i=0;i<t.length;++i)for(var s=0;s<t[i].options.length;++s)!0===t[i].options[s].selected&&(n[i].options[s].selected=!0);return this.find(":radio").each(function(){this.orginal_checked=this.checked}),e},O.fn.spf_expand_all=function(){return this.each(function(){O(this).on("click",function(e){e.preventDefault(),O(".spf-wrapper").toggleClass("spf-show-all"),O(".spf-section").spf_reload_script(),O(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})},O.fn.spf_nav_options=function(){return this.each(function(){var s,e=O(this),a=e.find("a"),r=e.closest(".spf").find(".spf-section-id");O(m).on("hashchange",function(){var e=m.location.hash.match(new RegExp("tab=([^&]*)")),t=e?e[1]:a.first().attr("href").replace("#tab=",""),n=O("#spf-tab-link-"+t);if(0<n.length){n.closest(".spf-tab-depth-0").addClass("spf-tab-active").siblings().removeClass("spf-tab-active"),a.removeClass("spf-section-active"),n.addClass("spf-section-active"),s!==y&&s.hide();var i=O("#spf-section-"+t);i.css({display:"block"}),i.spf_reload_script(),r.val(t),s=i}}).trigger("hashchange")})},O.fn.spf_nav_metabox=function(){return this.each(function(){var s,a,e=O(this),t=e.find("a"),r=e.data("unique"),o=O("#post_ID").val()||"global";t.on("click",function(e){e.preventDefault();var t=O(this),n=t.data("section");a!==y&&a.removeClass("spf-section-active"),s!==y&&s.hide(),t.addClass("spf-section-active");var i=O("#spf-section-"+n);i.css({display:"block"}),i.spf_reload_script(),A.helper.set_cookie("spf-last-metabox-tab-"+o+"-"+r,n),s=i,a=t});var n=A.helper.get_cookie("spf-last-metabox-tab-"+o+"-"+r);n?e.find('a[data-section="'+n+'"]').trigger("click"):t.first("a").trigger("click")})},O.fn.spf_page_templates=function(){this.length&&O(b).on("change",".editor-page-attributes__template select, #page_template",function(){var e=O(this).val()||"default";O(".spf-page-templates").removeClass("spf-show").addClass("spf-hide"),O(".spf-page-"+e.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("spf-hide").addClass("spf-show")})},O.fn.spf_post_formats=function(){this.length&&O(b).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var e=O(this).val()||"default";e="0"===e?"default":e,O(".spf-post-formats").removeClass("spf-show").addClass("spf-hide"),O(".spf-post-format-"+e).removeClass("spf-hide").addClass("spf-show")})},O.fn.spf_search=function(){return this.each(function(){O(this).find("input").on("change keyup",function(){var n=O(this).val(),e=O(".spf-wrapper"),t=e.find(".spf-section").find("> .spf-field:not(.hidden)"),i=t.find("> .spf-title, .spf-search-tags");3<n.length?(t.addClass("spf-hidden"),e.addClass("spf-search-all"),i.each(function(){var e=O(this);if(e.text().match(new RegExp(".*?"+n+".*?","i"))){var t=e.closest(".spf-field");t.removeClass("spf-hidden"),t.parent().spf_reload_script()}})):(t.removeClass("spf-hidden"),e.removeClass("spf-search-all"))})})},O.fn.spf_sticky=function(){return this.each(function(){function e(){o||requestAnimationFrame(function(){!function(){var e=i.offset().top,t=Math.max(32,e-r),n=Math.max(b.documentElement.clientWidth,m.innerWidth||0);t<=32&&782<n?(s.css({width:i.outerWidth()-a}),i.css({height:i.outerHeight()}).addClass("spf-sticky")):(s.removeAttr("style"),i.removeAttr("style").removeClass("spf-sticky"))}(),o=!1}),o=!0}function t(){r=n.scrollTop(),e()}var i=O(this),n=O(m),s=i.find(".spf-header-inner"),a=parseInt(s.css("padding-left"))+parseInt(s.css("padding-right")),r=0,o=!1;n.on("scroll resize",t),t()})},O.fn.spf_dependency=function(){return this.each(function(){var e=O(this),l=O.spf_deps.createRuleset(),d=[];e.children("[data-controller]").each(function(){var s=O(this),e=s.data("controller").split("|"),a=s.data("condition").split("|"),r=s.data("value").toString().split("|"),o=s.data("depend-global")||!1,f=l;O.each(e,function(e,t){var n=r[e]||"",i=a[e]||a[0];(f=f.createRule('[data-depend-id="'+t+'"]',i,n)).include(s),o?O.spf_deps.enable(A.vars.$body,l,t):d.push(t)})}),d.length&&O.spf_deps.enable(e,l,d)})},O.fn.spf_field_accordion=function(){return this.each(function(){O(this).find(".spf-accordion-title").on("click",function(){var e=O(this),t=e.find(".spf-accordion-icon"),n=e.next();t.hasClass("fa-angle-right")?t.removeClass("fa-angle-right").addClass("fa-angle-down"):t.removeClass("fa-angle-down").addClass("fa-angle-right"),n.data("opened")||(n.spf_reload_script(),n.data("opened",!0)),n.toggleClass("spf-accordion-open")})})},O.fn.spf_field_backup=function(){return this.each(function(){if(m.wp.customize!==y){var t=O(this),n=O("body"),i=t.find(".spf-import"),s=t.find(".spf-reset"),a=!1;s.on("click",function(e){e.preventDefault(),a||(n.addClass("spf-opacity"),m.wp.ajax.post("spf-reset",{unique:s.data("unique"),nonce:s.data("nonce")}).done(function(e){m.location.reload(!0)}).fail(function(e){alert(e.error),a=!1,n.removeClass("spf-opacity")})),a=!0}),i.on("click",function(e){e.preventDefault(),a||(n.addClass("spf-opacity"),m.wp.ajax.post("spf-import",{unique:i.data("unique"),nonce:i.data("nonce"),import_data:t.find(".spf-import-data").val()}).done(function(e){m.location.reload(!0)}).fail(function(e){alert(e.error),a=!1,n.removeClass("spf-opacity")})),a=!0})}})},O.fn.spf_field_background=function(){return this.each(function(){O(this).find(".spf--media").spf_reload_script()})},O.fn.spf_field_code_editor=function(){return this.each(function(){if("function"==typeof CodeMirror){var t=O(this),i=t.find("textarea"),e=t.find(".CodeMirror"),s=i.data("editor");e.length&&e.remove();var a=setInterval(function(){if(t.is(":visible")){var n=CodeMirror.fromTextArea(i[0],s);if("default"!==s.theme&&-1===A.vars.code_themes.indexOf(s.theme)){var e=O("<link>");O("#spf-codemirror-css").after(e),e.attr({rel:"stylesheet",id:"spf-codemirror-"+s.theme+"-css",href:s.cdnURL+"/theme/"+s.theme+".min.css",type:"text/css",media:"all"}),A.vars.code_themes.push(s.theme)}CodeMirror.modeURL=s.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(n,s.mode),n.on("change",function(e,t){i.val(n.getValue()).trigger("change")}),clearInterval(a)}})}})},O.fn.spf_field_date=function(){return this.each(function(){var e=O(this),i=e.find("input"),s=e.find(".spf-date-settings").data("settings"),t={showAnim:"",beforeShow:function(e,t){O(t.dpDiv).addClass("spf-datepicker-wrapper")},onClose:function(e,t){O(t.dpDiv).removeClass("spf-datepicker-wrapper")}};s=O.extend({},s,t),2===i.length&&(s=O.extend({},s,{onSelect:function(e){O(this),i.first();var t=i.first().attr("id")===O(this).attr("id")?"minDate":"maxDate",n=O.datepicker.parseDate(s.dateFormat,e);i.not(this).datepicker("option",t,n)}})),i.each(function(){var e=O(this);e.hasClass("hasDatepicker")&&e.removeAttr("id").removeClass("hasDatepicker"),e.datepicker(s)})})},O.fn.spf_field_fieldset=function(){return this.each(function(){O(this).find(".spf-fieldset-content").spf_reload_script()})},O.fn.spf_field_gallery=function(){return this.each(function(){var a,e=O(this),r=e.find(".spf-edit-gallery"),o=e.find(".spf-clear-gallery"),f=e.find("ul"),l=e.find("input");e.find("img");e.on("click",".spf-button, .spf-edit-gallery",function(e){var t=O(this),n=l.val(),i=t.hasClass("spf-edit-gallery")?"edit":"add",s="add"!=i||n.length?"gallery-edit":"gallery";e.preventDefault(),void 0!==m.wp&&m.wp.media&&m.wp.media.gallery&&("gallery"==s?(a=m.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0})).open():(a=m.wp.media.gallery.edit('[gallery ids="'+n+'"]'),"add"==i&&a.setState("gallery-library")),a.on("update",function(e){f.empty();var t=e.models.map(function(e){var t=e.toJSON(),n=void 0!==t.sizes.thumbnail?t.sizes.thumbnail.url:t.url;return f.append('<li><img src="'+n+'"></li>'),t.id});l.val(t.join(",")).trigger("change"),o.removeClass("hidden"),r.removeClass("hidden")}))}),o.on("click",function(e){e.preventDefault(),f.empty(),l.val("").trigger("change"),o.addClass("hidden"),r.addClass("hidden")})})},O.fn.spf_field_group=function(){return this.each(function(){var e=O(this),t=e.children(".spf-fieldset"),n=t.length?t:e,f=n.children(".spf-cloneable-wrapper"),s=n.children(".spf-cloneable-hidden"),l=n.children(".spf-cloneable-max"),d=n.children(".spf-cloneable-min"),p=f.data("field-id"),a=f.data("unique-id"),c=Boolean(Number(f.data("title-number"))),h=parseInt(f.data("max")),i=parseInt(f.data("min"));f.hasClass("ui-accordion")&&f.find(".ui-accordion-header-icon").remove();function u(e){e.find(".spf-cloneable-title-number").each(function(e){O(this).html(O(this).closest(".spf-cloneable-item").index()+1+".")})}f.accordion({header:"> .spf-cloneable-item > .spf-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"spf-cloneable-header-icon fa fa-angle-right",activeHeader:"spf-cloneable-header-icon fa fa-angle-down"},activate:function(e,t){var n=t.newPanel,i=t.newHeader;if(n.length&&!n.data("opened")){var s=n.children().first().find(":input").first(),a=i.find(".spf-cloneable-value");s.on("keyup",function(e){a.text(s.val())}),n.spf_reload_script(),n.data("opened",!0),n.data("retry",!1)}else n.data("retry")&&(n.spf_reload_script_retry(),n.data("retry",!1))}}),f.sortable({axis:"y",handle:".spf-cloneable-title,.spf-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,t){f.accordion({active:!1}),f.sortable("refreshPositions"),t.item.children(".spf-cloneable-content").data("retry",!0)},update:function(e,t){A.helper.name_nested_replace(f.children(".spf-cloneable-item"),p),f.spf_customizer_refresh(),c&&u(f)}}),n.children(".spf-cloneable-add").on("click",function(e){e.preventDefault();var t=f.children(".spf-cloneable-item").length;if(d.hide(),h&&h<t+1)l.show();else{var n=a+p+"["+t+"]",i=s.spf_clone(!0);i.removeClass("spf-cloneable-hidden"),i.find(":input").each(function(){this.name=n+this.name.replace(this.name.startsWith("_nonce")?"_nonce":a,"")}),i.find(".spf-data-wrapper").each(function(){O(this).attr("data-unique-id",n)}),f.append(i),f.accordion("refresh"),f.accordion({active:t}),f.spf_customizer_refresh(),f.spf_customizer_listen({closest:!0}),c&&u(f)}});function r(e){e.preventDefault();var t=f.children(".spf-cloneable-item").length;if(d.hide(),h&&h<t+1)l.show();else{var n=O(this).parent().parent(),i=n.children(".spf-cloneable-helper").spf_clone(!0),s=n.children(".spf-cloneable-title").spf_clone(),a=n.children(".spf-cloneable-content").spf_clone(),r=new RegExp("("+A.helper.preg_quote(p)+")\\[(\\d+)\\]","g");a.find(".spf-data-wrapper").each(function(){var e=O(this);e.attr("data-unique-id",e.attr("data-unique-id").replace(r,p+"["+(n.index()+1)+"]"))});var o=O('<div class="spf-cloneable-item" />');o.append(i),o.append(s),o.append(a),f.children().eq(n.index()).after(o),A.helper.name_nested_replace(f.children(".spf-cloneable-item"),p),f.accordion("refresh"),f.spf_customizer_refresh(),f.spf_customizer_listen({closest:!0}),c&&u(f)}}f.children(".spf-cloneable-item").children(".spf-cloneable-helper").on("click",".spf-cloneable-clone",r),n.children(".spf-cloneable-hidden").children(".spf-cloneable-helper").on("click",".spf-cloneable-clone",r);function o(e){e.preventDefault();var t=f.children(".spf-cloneable-item").length;l.hide(),d.hide(),i&&t-1<i?d.show():(O(this).closest(".spf-cloneable-item").remove(),A.helper.name_nested_replace(f.children(".spf-cloneable-item"),p),f.spf_customizer_refresh(),c&&u(f))}f.children(".spf-cloneable-item").children(".spf-cloneable-helper").on("click",".spf-cloneable-remove",o),n.children(".spf-cloneable-hidden").children(".spf-cloneable-helper").on("click",".spf-cloneable-remove",o)})},O.fn.spf_field_icon=function(){return this.each(function(){var n=O(this);n.on("click",".spf-icon-add",function(e){e.preventDefault();var t=O(this),i=O("#spf-modal-icon");i.show(),A.vars.$icon_target=n,A.vars.icon_modal_loaded||(i.find(".spf-modal-loading").show(),m.wp.ajax.post("spf-get-icons",{nonce:t.data("nonce")}).done(function(e){i.find(".spf-modal-loading").hide(),A.vars.icon_modal_loaded=!0;var n=i.find(".spf-modal-load").html(e.content);n.on("click","a",function(e){e.preventDefault();var t=O(this).data("spf-icon");A.vars.$icon_target.find("i").removeAttr("class").addClass(t),A.vars.$icon_target.find("input").val(t).trigger("change"),A.vars.$icon_target.find(".spf-icon-preview").removeClass("hidden"),A.vars.$icon_target.find(".spf-icon-remove").removeClass("hidden"),i.hide()}),i.on("change keyup",".spf-icon-search",function(){var t=O(this).val();n.find("a").each(function(){var e=O(this);e.data("spf-icon").search(new RegExp(t,"i"))<0?e.hide():e.show()})}),i.on("click",".spf-modal-close, .spf-modal-overlay",function(){i.hide()})}))}),n.on("click",".spf-icon-remove",function(e){e.preventDefault(),n.find(".spf-icon-preview").addClass("hidden"),n.find("input").val("").trigger("change"),O(this).addClass("hidden")})})},O.fn.spf_field_media=function(){return this.each(function(){var i,s=O(this),a=s.find(".spf--button"),r=s.find(".spf--remove");a.on("click",function(e){e.preventDefault(),void 0!==m.wp&&m.wp.media&&m.wp.media.gallery&&(i||(i=m.wp.media({library:{type:a.data("library").split(",")}})).on("select",function(){var e,t=i.state().get("selection").first().attributes,n=a.data("preview-size")||"thumbnail";s.find(".spf--url").val(t.url),s.find(".spf--id").val(t.id),s.find(".spf--width").val(t.width),s.find(".spf--height").val(t.height),s.find(".spf--alt").val(t.alt),s.find(".spf--title").val(t.title),s.find(".spf--description").val(t.description),e=void 0!==t.sizes&&void 0!==t.sizes.thumbnail&&"thumbnail"===n?t.sizes.thumbnail.url:void 0!==t.sizes&&void 0!==t.sizes.full?t.sizes.full.url:t.icon,r.removeClass("hidden"),s.find(".spf--preview").removeClass("hidden"),s.find(".spf--src").attr("src",e),s.find(".spf--thumbnail").val(e).trigger("change")}),i.open())}),r.on("click",function(e){e.preventDefault(),r.addClass("hidden"),s.find(".spf--preview").addClass("hidden"),s.find("input").val(""),s.find(".spf--thumbnail").trigger("change")})})},O.fn.spf_field_repeater=function(){return this.each(function(){var e=O(this),t=e.children(".spf-fieldset"),n=t.length?t:e,o=n.children(".spf-repeater-wrapper"),s=n.children(".spf-repeater-hidden"),f=n.children(".spf-repeater-max"),l=n.children(".spf-repeater-min"),d=o.data("field-id"),a=o.data("unique-id"),p=parseInt(o.data("max")),i=parseInt(o.data("min"));o.children(".spf-repeater-item").children(".spf-repeater-content").spf_reload_script(),o.sortable({axis:"y",handle:".spf-repeater-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){A.helper.name_nested_replace(o.children(".spf-repeater-item"),d),o.spf_customizer_refresh(),t.item.spf_reload_script_retry()}}),n.children(".spf-repeater-add").on("click",function(e){e.preventDefault();var t=o.children(".spf-repeater-item").length;if(l.hide(),p&&p<t+1)f.show();else{var n=a+d+"["+t+"]",i=s.spf_clone(!0);i.removeClass("spf-repeater-hidden"),i.find(":input").each(function(){this.name=n+this.name.replace(this.name.startsWith("_nonce")?"_nonce":a,"")}),i.find(".spf-data-wrapper").each(function(){O(this).attr("data-unique-id",n)}),o.append(i),i.children(".spf-repeater-content").spf_reload_script(),o.spf_customizer_refresh(),o.spf_customizer_listen({closest:!0})}});function r(e){e.preventDefault();var t=o.children(".spf-repeater-item").length;if(l.hide(),p&&p<t+1)f.show();else{var n=O(this).parent().parent().parent(),i=n.children(".spf-repeater-content").spf_clone(),s=n.children(".spf-repeater-helper").spf_clone(!0),a=new RegExp("("+A.helper.preg_quote(d)+")\\[(\\d+)\\]","g");i.find(".spf-data-wrapper").each(function(){var e=O(this);e.attr("data-unique-id",e.attr("data-unique-id").replace(a,d+"["+(n.index()+1)+"]"))});var r=O('<div class="spf-repeater-item" />');r.append(i),r.append(s),o.children().eq(n.index()).after(r),r.children(".spf-repeater-content").spf_reload_script(),A.helper.name_nested_replace(o.children(".spf-repeater-item"),d),o.spf_customizer_refresh(),o.spf_customizer_listen({closest:!0})}}o.children(".spf-repeater-item").children(".spf-repeater-helper").on("click",".spf-repeater-clone",r),n.children(".spf-repeater-hidden").children(".spf-repeater-helper").on("click",".spf-repeater-clone",r);function c(e){e.preventDefault();var t=o.children(".spf-repeater-item").length;f.hide(),l.hide(),i&&t-1<i?l.show():(O(this).closest(".spf-repeater-item").remove(),A.helper.name_nested_replace(o.children(".spf-repeater-item"),d),o.spf_customizer_refresh())}o.children(".spf-repeater-item").children(".spf-repeater-helper").on("click",".spf-repeater-remove",c),n.children(".spf-repeater-hidden").children(".spf-repeater-helper").on("click",".spf-repeater-remove",c)})},O.fn.spf_field_slider=function(){return this.each(function(){var e=O(this),n=e.find("input"),t=e.find(".spf-slider-ui"),i=n.data(),s=n.val()||0;t.hasClass("ui-slider")&&t.empty(),t.slider({range:"min",value:s,min:i.min,max:i.max,step:i.step,slide:function(e,t){n.val(t.value).trigger("change")}}),n.keyup(function(){t.slider("value",n.val())})})},O.fn.spf_field_sortable=function(){return this.each(function(){var n=O(this).find(".spf--sortable");n.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){n.spf_customizer_refresh()}}),n.find(".spf--sortable-content").spf_reload_script()})},O.fn.spf_field_sorter=function(){return this.each(function(){var i=O(this),e=i.find(".spf-enabled"),t=i.find(".spf-disabled"),n=!!t.length&&t;e.sortable({connectWith:n,placeholder:"ui-sortable-placeholder",update:function(e,t){var n=t.item.find("input");t.item.parent().hasClass("spf-enabled")?n.attr("name",n.attr("name").replace("disabled","enabled")):n.attr("name",n.attr("name").replace("enabled","disabled")),i.spf_customizer_refresh()}}),n&&n.sortable({connectWith:e,placeholder:"ui-sortable-placeholder",update:function(e,t){i.spf_customizer_refresh()}})})},O.fn.spf_field_spinner=function(){return this.each(function(){var e=O(this),n=e.find("input"),t=e.find(".ui-spinner-button");t.length&&t.remove(),n.spinner({max:n.data("max")||100,min:n.data("min")||0,step:n.data("step")||1,spin:function(e,t){n.val(t.value).trigger("change")}})})},O.fn.spf_field_switcher=function(){return this.each(function(){var n=O(this).find(".spf--switcher");n.on("click",function(){var e=0,t=n.find("input");n.hasClass("spf--active")?n.removeClass("spf--active"):(e=1,n.addClass("spf--active")),t.val(e).trigger("change")})})},O.fn.spf_field_tabbed=function(){return this.each(function(){var e=O(this),t=e.find(".spf-tabbed-nav a"),s=e.find(".spf-tabbed-section");s.eq(0).spf_reload_script(),t.on("click",function(e){e.preventDefault();var t=O(this),n=t.index(),i=s.eq(n);t.addClass("spf-tabbed-active").siblings().removeClass("spf-tabbed-active"),i.spf_reload_script(),i.removeClass("hidden").siblings().addClass("hidden")})})},O.fn.spf_field_typography=function(){return this.each(function(){var q=this,S=O(this),i=[],I=spf_typography_json.webfonts,t=spf_typography_json.googlestyles,j=spf_typography_json.defaultstyles;q.sanitize_subset=function(e){return e=(e=e.replace("-ext"," Extended")).charAt(0).toUpperCase()+e.slice(1)},q.sanitize_style=function(e){return t[e]?t[e]:e},q.load_google_font=function(e,t,n){e&&"object"==typeof WebFont&&(t=t?t.replace("normal",""):"",n=n?n.replace("normal",""):"",(t||n)&&(e=e+":"+t+n),-1===i.indexOf(e)&&WebFont.load({google:{families:[e]}}),i.push(e))},q.append_select_options=function(e,t,s,a,r){e.find("option").not(":first").remove();var o="";O.each(t,function(e,t){var n,i=t;n=r?s&&-1!==s.indexOf(t)?" selected":"":s&&s===t?" selected":"","subset"===a?i=q.sanitize_subset(t):"style"===a&&(i=q.sanitize_style(t)),o+='<option value="'+t+'"'+n+">"+i+"</option>"}),e.append(o).trigger("spf.change").trigger("chosen:updated")},q.init=function(){var d=[],e=S.find(".spf--typography"),p=S.find(".spf--type"),m=e.data("unit"),t=e.data("exclude")?e.data("exclude").split(","):[];S.find(".spf--chosen").length&&S.find("select").each(function(){var e=O(this),t=e.parent().find(".chosen-container");t.length&&t.remove(),e.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})});var b=S.find(".spf--font-family"),i=b.val();b.find("option").not(":first-child").remove();var s="";O.each(I,function(n,e){t&&-1!==t.indexOf(n)||(s+='<optgroup label="'+e.label+'">',O.each(e.fonts,function(e,t){s+='<option value="'+(t="object"==typeof t?e:t)+'" data-type="'+n+'"'+(t===i?" selected":"")+">"+t+"</option>"}),s+="</optgroup>")}),b.append(s).trigger("chosen:updated");var c=S.find(".spf--block-font-style");if(c.length){var h=S.find(".spf--font-style-select"),u=h.val()?h.val().replace(/normal/g,""):"";h.on("change spf.change",function(e){var t=h.val();!t&&d&&-1===d.indexOf("normal")&&(t=d[0]);var n=t&&"italic"!==t&&"normal"===t?"normal":"",i=t&&"italic"!==t&&"normal"!==t?t.replace("italic",""):n,s=t&&"italic"===t.substr(-6)?"italic":"";S.find(".spf--font-weight").val(i),S.find(".spf--font-style").val(s)});var v=S.find(".spf--block-extra-styles");if(v.length)var g=S.find(".spf--extra-styles"),_=g.val()}var y=S.find(".spf--block-subset");if(y.length)var w=S.find(".spf--subset"),k=w.val(),C=w.data("multiple")||!1;var x=S.find(".spf--block-backup-font-family");b.on("change spf.change",function(e){y.length&&y.addClass("hidden"),v.length&&v.addClass("hidden"),x.length&&x.addClass("hidden");var t=b.find(":selected"),n=t.val(),i=t.data("type");if(i&&n){if("google"!==i&&"custom"!==i||!x.length||x.removeClass("hidden"),c.length){var s=j;"google"===i&&I[i].fonts[n][0]?s=I[i].fonts[n][0]:"custom"===i&&I[i].fonts[n]&&(s=I[i].fonts[n]);var a=-1!==(d=s).indexOf("normal")?"normal":s[0],r=u&&-1!==s.indexOf(u)?u:a;q.append_select_options(h,s,r,"style"),u=!1,c.removeClass("hidden"),"google"===i&&v.length&&1<s.length&&(q.append_select_options(g,s,_,"style",!0),_=!1,v.removeClass("hidden"))}if("google"===i&&y.length&&I[i].fonts[n][1]){var o=I[i].fonts[n][1],f=o.length<2&&"latin"!==o[0]?o[0]:"",l=k&&-1!==o.indexOf(k)?k:f;l=C&&k?k:l,q.append_select_options(w,o,l,"subset",C),k=!1,y.removeClass("hidden")}}else y.length&&(w.find("option").not(":first-child").remove(),w.trigger("chosen:updated")),c.length&&(h.find("option").not(":first-child").remove(),h.trigger("chosen:updated"));p.val(i)}).trigger("spf.change");var z=S.find(".spf--block-preview");if(z.length){var D=S.find(".spf--preview");S.on("change",A.helper.debounce(function(e){z.removeClass("hidden");var t=b.val(),n=S.find(".spf--font-weight").val(),i=S.find(".spf--font-style").val(),s=S.find(".spf--font-size").val(),a=S.find(".spf--font-variant").val(),r=S.find(".spf--line-height").val(),o=S.find(".spf--text-align").val(),f=S.find(".spf--text-transform").val(),l=S.find(".spf--text-decoration").val(),d=S.find(".spf--color").val(),p=S.find(".spf--word-spacing").val(),c=S.find(".spf--letter-spacing").val(),h=S.find(".spf--custom-style").val(),u=S.find(".spf--type").val(),v=S.find(".spf--margin-top").val(),g=S.find(".spf--margin-bottom").val();"google"===u&&q.load_google_font(t,n,i);var _={};t&&(_.fontFamily=t),n&&(_.fontWeight=n),i&&(_.fontStyle=i),a&&(_.fontVariant=a),s&&(_.fontSize=s+m),r&&(_.lineHeight=r+m),c&&(_.letterSpacing=c),p&&(_.wordSpacing=p+m),o&&(_.textAlign=o),f&&(_.textTransform=f),l&&(_.textDecoration=l),d&&(_.color=d),v&&(_.marginTop=v+m),g&&(_.marginBottom=g+m),D.removeAttr("style"),h&&D.attr("style",h),D.css(_)},100)),z.on("click",function(){D.toggleClass("spf--black-background");z.find(".spf--toggle")}),z.hasClass("hidden")||S.trigger("change")}},q.init()})},O.fn.spf_field_upload=function(){return this.each(function(){var t,e=O(this),n=e.find("input"),i=e.find(".spf--button"),s=e.find(".spf--remove");i.data("library")&&i.data("library").split(",");n.on("change",function(e){n.val()?s.removeClass("hidden"):s.addClass("hidden")}),i.on("click",function(e){e.preventDefault(),void 0!==m.wp&&m.wp.media&&m.wp.media.gallery&&(t||(t=m.wp.media({library:{type:i.data("library").split(",")}})).on("select",function(){n.val(t.state().get("selection").first().attributes.url).trigger("change")}),t.open())}),s.on("click",function(e){e.preventDefault(),n.val("").trigger("change")})})},O.fn.spf_confirm=function(){return this.each(function(){O(this).on("click",function(e){var t=O(this).data("confirm")||m.spf_vars.i18n.confirm;if(!confirm(t))return e.preventDefault(),!1})})},O.fn.serializeObject=function(){var s={};return O.each(this.serializeArray(),function(e,t){var n=t.name,i=t.value;s[n]=s[n]===y?i:O.isArray(s[n])?s[n].concat(i):[s[n],i]}),s},O.fn.spf_save=function(){return this.each(function(){var i,s=O(this),o=O(".spf-save"),f=O(".spf-options"),l=!1;s.on("click",function(e){if(!l){var t=s.data("save"),n=s.val();o.attr("value",t),s.hasClass("spf-save-ajax")&&(e.preventDefault(),f.addClass("spf-saving"),o.prop("disabled",!0),m.wp.ajax.post("spf_"+f.data("unique")+"_ajax_save",{data:O("#spf-form").serializeJSONspf()}).done(function(e){clearTimeout(i);var t=O(".spf-form-success");t.empty().append(e.notice).slideDown("fast",function(){i=setTimeout(function(){t.slideUp("fast")},2e3)}),O(".spf-error").remove();var a=O(".spf-form-error");if(a.empty().hide(),Object.keys(e.errors).length){var r='<i class="spf-label-error spf-error">!</i>';O.each(e.errors,function(e,t){var n=O('[data-depend-id="'+e+'"]'),i=O("#spf-tab-link-"+(n.closest(".spf-section").index()+1)),s=i.closest(".spf-tab-depth-0");n.closest(".spf-fieldset").append('<p class="spf-text-error spf-error">'+t+"</p>"),i.find(".spf-error").length||i.append(r),s.find(".spf-arrow .spf-error").length||s.find(".spf-arrow").append(r),console.log(t),a.append("<div>"+r+" "+t+"</div>")}),a.show()}f.removeClass("spf-saving"),o.prop("disabled",!1).attr("value",n),l=!1}).fail(function(e){alert(e.error)}))}l=!0})})},O.fn.spf_taxonomy=function(){return this.each(function(){var e=O(this),t=e.parents("form");if("addtag"===t.attr("id")){var n=t.find("#submit"),i=e.find(".spf-field").spf_clone();n.on("click",function(){t.find(".form-required").hasClass("form-invalid")||(e.data("inited",!1),e.empty(),e.html(i),i=i.spf_clone(),e.spf_reload_script())})}})},O.fn.spf_shortcode=function(){var _=this;return _.shortcode_parse=function(e,n){var i="";return O.each(e,function(e,t){i+="["+(n=n||e),O.each(t,function(e,t){"content"===e?(i+="]",i+=t,i+="[/"+n):i+=_.shortcode_tags(e,t)}),i+="]"}),i},_.shortcode_tags=function(e,t){var n="";return""!==t&&("object"!=typeof t||O.isArray(t)?n+=" "+e.replace("-","_")+'="'+t.toString()+'"':O.each(t,function(e,t){switch(e){case"background-image":t=t.url?t.url:""}""!==t&&(n+=" "+e.replace("-","_")+'="'+t.toString()+'"')})),n},_.insertAtChars=function(e,t){var n=void 0!==e[0].name?e[0]:e;return n.value.length&&void 0!==n.selectionStart?(n.focus(),n.value.substring(0,n.selectionStart)+t+n.value.substring(n.selectionEnd,n.value.length)):(n.focus(),t)},_.send_to_editor=function(e,t){var n;if("undefined"!=typeof tinymce&&(n=tinymce.get(t)),n&&!n.isHidden())n.execCommand("mceInsertContent",!1,e);else{var i=O("#"+t);i.val(_.insertAtChars(i,e)).trigger("change")}},this.each(function(){var r,o,f,n,l,d,p,s,c,h=O(this),i=h.find(".spf-modal-load"),a=(h.find(".spf-modal-content"),h.find(".spf-modal-insert")),u=h.find(".spf-modal-loading"),t=h.find("select"),v=h.data("modal-id"),g=h.data("nonce");O(b).on("click",'.spf-shortcode-button[data-modal-id="'+v+'"]',function(e){e.preventDefault(),c=O(this),r=c.data("editor-id")||!1,o=c.data("target-id")||!1,f=c.data("gutenberg-id")||!1,h.show(),h.hasClass("spf-shortcode-single")&&l===y&&t.trigger("change")}),t.on("change",function(){var e=O(this),t=e.find(":selected");n=e.val(),l=t.data("shortcode"),d=t.data("view")||"normal",p=t.data("group")||l,i.empty(),n?(u.show(),m.wp.ajax.post("spf-get-shortcode-"+v,{shortcode_key:n,nonce:g}).done(function(e){u.hide();var t=O(e.content).appendTo(i);a.parent().removeClass("hidden"),s=t.find(".spf--repeat-shortcode").spf_clone(),t.spf_reload_script(),t.find(".spf-fields").spf_reload_script()})):a.parent().addClass("hidden")}),a.on("click",function(e){e.preventDefault();var i="",t=h.find(".spf-field:not(.hidden)").find(":input").serializeObjectspf();switch(d){case"contents":var n=l?t[l]:t;O.each(n,function(e,t){var n=l||e;i+="["+n+"]"+t+"[/"+n+"]"});break;case"group":i+="["+l,O.each(t[l],function(e,t){i+=_.shortcode_tags(e,t)}),i+="]",i+=_.shortcode_parse(t[p],p),i+="[/"+l+"]";break;case"repeater":i+=_.shortcode_parse(t[p],p);break;default:i+=_.shortcode_parse(t)}if(f){var s=m.spf_gutenberg_props.attributes.hasOwnProperty("shortcode")?m.spf_gutenberg_props.attributes.shortcode:"";m.spf_gutenberg_props.setAttributes({shortcode:s+i})}else if(r)_.send_to_editor(i,r);else{var a=o?O(o):c.parent().find("textarea");a.val(_.insertAtChars(a,i)).trigger("change")}h.hide()}),h.on("click",".spf--repeat-button",function(e){e.preventDefault();var t=h.find(".spf--repeatable"),n=s.spf_clone(),i=n.find(".spf-repeat-remove");n.appendTo(t);n.find(".spf-fields").spf_reload_script(),A.helper.name_nested_replace(h.find(".spf--repeat-shortcode"),p),i.on("click",function(){n.remove(),A.helper.name_nested_replace(h.find(".spf--repeat-shortcode"),p)})}),h.on("click",".spf-modal-close, .spf-modal-overlay",function(){h.hide()})})},O.fn.spf_checkbox=function(){return this.each(function(){var e=O(this),t=e.find(".spf--input"),n=e.find(".spf--checkbox");n.on("click",function(){t.val(Number(n.prop("checked"))).trigger("change")})})},O.fn.spf_field_wp_editor=function(){return this.each(function(){if(void 0!==m.wp.editor&&void 0!==m.tinyMCEPreInit&&void 0!==m.tinyMCEPreInit.mceInit.spf_wp_editor){var e=O(this),t=e.find(".spf-wp-editor"),n=e.find("textarea");(e.find(".wp-editor-wrap").length||e.find(".mce-container").length)&&(t.empty(),t.append(n),n.css("display",""));var i=A.helper.uid("spf-editor-");n.attr("id",i);var s={tinymce:m.tinyMCEPreInit.mceInit.spf_wp_editor,quicktags:m.tinyMCEPreInit.qtInit.spf_wp_editor},a=t.data("editor-settings");s.tinymce=O.extend({},s.tinymce,{selector:"#"+i,setup:function(e){e.on("change",A.helper.debounce(function(){e.save(),n.trigger("change")},250))}}),!1===a.tinymce&&(s.tinymce=!1,t.addClass("spf-no-tinymce")),!1===a.quicktags&&(s.quicktags=!1,t.addClass("spf-no-quicktags"));var r=setInterval(function(){e.is(":visible")&&(m.wp.editor.initialize(i,s),clearInterval(r))});if(a.media_buttons&&m.spf_media_buttons){var o=t.find(".wp-media-buttons");if(o.length)o.find(".spf-shortcode-button").data("editor-id",i);else{var f=O(m.spf_media_buttons);f.find(".spf-shortcode-button").data("editor-id",i),t.prepend(f)}}}})},O.fn.spf_siblings=function(){return this.each(function(){var t=O(this),e=t.find(".spf--sibling"),n=t.data("multiple")||!1;e.on("click",function(){var e=O(this);n?e.hasClass("spf--active")?(e.removeClass("spf--active"),e.find("input").prop("checked",!1).trigger("change")):(e.addClass("spf--active"),e.find("input").prop("checked",!0).trigger("change")):(t.find("input").prop("checked",!1),e.find("input").prop("checked",!0).trigger("change"),e.addClass("spf--active").siblings().removeClass("spf--active"))})})},"function"==typeof Color&&(Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;0<=t;t--)e="0"+e;return"#"+e}),A.funcs.parse_color=function(e){var t=e.replace(/\s+/g,""),n=-1!==t.indexOf("rgba")?parseFloat(100*t.replace(/^.*,(.+)\)/,"$1")):100;return{value:t,transparent:n,rgba:n<100}},O.fn.spf_color=function(){return this.each(function(){var o,f=O(this),l=A.funcs.parse_color(f.val()),e=!m.spf_vars.color_palette.length||m.spf_vars.color_palette;f.hasClass("wp-color-picker")&&f.closest(".wp-picker-container").after(f).remove(),f.wpColorPicker({palettes:e,change:function(e,t){var n=t.color.toString();o.removeClass("spf--transparent-active"),o.find(".spf--transparent-offset").css("background-color",n),f.val(n).trigger("change")},create:function(){o=f.closest(".wp-picker-container");var i=f.data("a8cIris"),n=O('<div class="spf--transparent-wrap"><div class="spf--transparent-slider"></div><div class="spf--transparent-offset"></div><div class="spf--transparent-text"></div><div class="spf--transparent-button button button-small">transparent</div></div>').appendTo(o.find(".wp-picker-holder")),s=n.find(".spf--transparent-slider"),a=n.find(".spf--transparent-text"),r=n.find(".spf--transparent-offset"),e=n.find(".spf--transparent-button");"transparent"===f.val()&&o.addClass("spf--transparent-active"),e.on("click",function(){"transparent"!==f.val()?(f.val("transparent").trigger("change"),o.addClass("spf--transparent-active")):(f.val(i._color.toString()).trigger("change"),o.removeClass("spf--transparent-active"))}),s.slider({value:l.transparent,step:1,min:0,max:100,slide:function(e,t){var n=parseFloat(t.value/100);i._color._alpha=n,f.wpColorPicker("color",i._color.toString()),a.text(1===n||0===n?"":n)},create:function(){var e=parseFloat(l.transparent/100),t=e<1?e:"";a.text(t),r.css("background-color",l.value),o.on("click",".wp-picker-clear",function(){i._color._alpha=1,a.text(""),s.slider("option","value",100),o.removeClass("spf--transparent-active"),f.trigger("change")}),o.on("click",".wp-picker-default",function(){var e=A.funcs.parse_color(f.data("default-color")),t=parseFloat(e.transparent/100),n=t<1?t:"";i._color._alpha=t,a.text(n),s.slider("option","value",e.transparent)}),o.on("click",".wp-color-result",function(){n.toggle()}),O("body").on("click.wpcolorpicker",function(){n.hide()})}})}})})},O.fn.spf_chosen=function(){return this.each(function(){var e=O(this),t=e.parent().find(".chosen-container"),n=e.attr("multiple")||!1?"100%":"auto",i=O.extend({allow_single_deselect:!0,disable_search_threshold:15,width:n},e.data());t.length&&t.remove(),e.chosen(i)})},O.fn.spf_number=function(){return this.each(function(){O(this).on("keypress",function(e){if(0!==e.keyCode&&8!==e.keyCode&&45!==e.keyCode&&46!==e.keyCode&&(e.keyCode<48||57<e.keyCode))return!1})})},O.fn.spf_help=function(){return this.each(function(){var e,t,n=O(this);n.on({mouseenter:function(){e=O('<div class="spf-tooltip"></div>').html(n.find(".spf-help-text").html()).appendTo("body"),t=A.vars.is_rtl?n.offset().left+24:n.offset().left-e.outerWidth(),e.css({top:n.offset().top-(e.outerHeight()/2-14),left:t})},mouseleave:function(){e!==y&&e.remove()}})})},O.fn.spf_customizer_refresh=function(){return this.each(function(){var e=O(this),t=e.closest(".spf-customize-complex");if(t.length){var n=t.find(":input"),i=t.data("unique-id"),s=t.data("option-id"),a=n.serializeObjectspf(),r=O.isEmptyObject(a)?"":a[i][s],o=wp.customize.control(i+"["+s+"]");o.setting._value=null,o.setting.set(r)}else e.find(":input").first().trigger("change");O(b).trigger("spf-customizer-refresh",e)})},O.fn.spf_customizer_listen=function(e){var s=O.extend({closest:!1},e);return this.each(function(){if(m.wp.customize!==y){var t=s.closest?O(this).closest(".spf-customize-complex"):O(this),e=t.find(":input"),n=t.data("unique-id"),i=t.data("option-id");n!==y&&e.on("change keyup",A.helper.debounce(function(){var e=t.find(":input").serializeObjectspf();!O.isEmptyObject(e)&&e[n]&&m.wp.customize.control(n+"["+i+"]").setting.set(e[n][i])},250))}})},O(b).on("expanded",".control-section-spf",function(){var e=O(this);e.hasClass("open")&&!e.data("inited")&&(e.spf_dependency(),e.find(".spf-customize-field").spf_reload_script({dependency:!1}),e.find(".spf-customize-complex").spf_customizer_listen(),e.data("inited",!0))}),A.vars.$window.on("resize spf.resize",A.helper.debounce(function(e){(-1<navigator.userAgent.indexOf("AppleWebKit/")?A.vars.$window.width():m.innerWidth)<=782&&!A.vars.onloaded&&(O(".spf-section").spf_reload_script(),A.vars.onloaded=!0)},200)).trigger("spf.resize"),O.fn.spf_widgets=function(){this.length&&(O(b).on("widget-added widget-updated",function(e,t){t.find(".spf-fields").spf_reload_script()}),O(".widgets-sortables, .control-section-sidebar").on("sortstop",function(e,t){t.item.find(".spf-fields").spf_reload_script_retry()}),O(b).on("click",".widget-top",function(e){O(this).parent().find(".spf-fields").spf_reload_script()}))},O.fn.spf_reload_script_retry=function(){return this.each(function(){var e=O(this);e.data("inited")&&e.children(".spf-field-wp_editor").spf_field_wp_editor()})},O.fn.spf_reload_script=function(e){var t=O.extend({dependency:!0},e);return this.each(function(){var e=O(this);e.data("inited")||(e.children(".spf-field-accordion").spf_field_accordion(),e.children(".spf-field-backup").spf_field_backup(),e.children(".spf-field-background").spf_field_background(),e.children(".spf-field-code_editor").spf_field_code_editor(),e.children(".spf-field-date").spf_field_date(),e.children(".spf-field-fieldset").spf_field_fieldset(),e.children(".spf-field-gallery").spf_field_gallery(),e.children(".spf-field-group").spf_field_group(),e.children(".spf-field-icon").spf_field_icon(),e.children(".spf-field-media").spf_field_media(),e.children(".spf-field-repeater").spf_field_repeater(),e.children(".spf-field-slider").spf_field_slider(),e.children(".spf-field-sortable").spf_field_sortable(),e.children(".spf-field-sorter").spf_field_sorter(),e.children(".spf-field-spinner").spf_field_spinner(),e.children(".spf-field-switcher").spf_field_switcher(),e.children(".spf-field-tabbed").spf_field_tabbed(),e.children(".spf-field-typography").spf_field_typography(),e.children(".spf-field-upload").spf_field_upload(),e.children(".spf-field-wp_editor").spf_field_wp_editor(),e.children(".spf-field-border").find(".spf-color").spf_color(),e.children(".spf-field-box_shadow").find(".spf-color").spf_color(),e.children(".spf-field-background").find(".spf-color").spf_color(),e.children(".spf-field-color").find(".spf-color").spf_color(),e.children(".spf-field-color_group").find(".spf-color").spf_color(),e.children(".spf-field-link_color").find(".spf-color").spf_color(),e.children(".spf-field-typography").find(".spf-color").spf_color(),e.children(".spf-field-dimensions").find(".spf-number").spf_number(),e.children(".spf-field-slider").find(".spf-number").spf_number(),e.children(".spf-field-spacing").find(".spf-number").spf_number(),e.children(".spf-field-column").find(".spf-number").spf_number(),e.children(".spf-field-spinner").find(".spf-number").spf_number(),e.children(".spf-field-typography").find(".spf-number").spf_number(),e.children(".spf-field-select").find(".spf-chosen").spf_chosen(),e.children(".spf-field-checkbox").find(".spf-checkbox").spf_checkbox(),e.children(".spf-field-button_set").find(".spf-siblings").spf_siblings(),e.children(".spf-field-image_select").find(".spf-siblings").spf_siblings(),e.children(".spf-field-palette").find(".spf-siblings").spf_siblings(),e.children(".spf-field").find(".spf-help").spf_help(),t.dependency&&e.spf_dependency(),e.data("inited",!0),O(b).trigger("spf-reload-script",e))})},O(b).ready(function(){O(".spf-save").spf_save(),O(".spf-confirm").spf_confirm(),O(".spf-nav-options").spf_nav_options(),O(".spf-nav-metabox").spf_nav_metabox(),O(".spf-expand-all").spf_expand_all(),O(".spf-search").spf_search(),O(".spf-sticky-header").spf_sticky(),O(".spf-taxonomy").spf_taxonomy(),O(".spf-shortcode").spf_shortcode(),O(".spf-page-templates").spf_page_templates(),O(".spf-post-formats").spf_post_formats(),O(".spf-onload").spf_reload_script(),O(".widget").spf_widgets()})}(jQuery,window,document);