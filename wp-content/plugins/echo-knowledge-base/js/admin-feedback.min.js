!function(e){"use strict";var t={cacheElements:function(){this.cache={$deactivateLink:e("#the-list").find('[data-slug="echo-knowledge-base"] span.deactivate a'),$dialogHeader:e("#epkb-deactivate-feedback-dialog-header"),$dialogForm:e("#epkb-deactivate-feedback-dialog-form")}},bindEvents:function(){var e=this;e.cache.$deactivateLink.on("click",function(t){t.preventDefault(),e.getModal().show()})},deactivate:function(){location.href=this.cache.$deactivateLink.attr("href")},initModal:function(){var t,a=this;a.getModal=function(){if(!t){var i=new EPKBDialogsManager.Instance;t=i.createWidget("lightbox",{id:"epkb-deactivate-feedback-modal",headerMessage:a.cache.$dialogHeader,classes:{globalPrefix:"epkb-dialog"},message:a.cache.$dialogForm,hide:{onButtonClick:!1},position:{my:"center",at:"center"},onReady:function(){EPKBDialogsManager.getWidgetType("lightbox").prototype.onReady.apply(this,arguments),this.addButton({name:"submit",text:"Submit & Deactivate",callback:a.sendFeedback.bind(a)}),this.addButton({name:"skip",text:"Skip & Deactivate",callback:function(){a.deactivate()}})},onShow:function(){var t=e("#epkb-deactivate-feedback-modal");t.find(".epkb-deactivate-feedback-dialog-input").on("change",function(){t.attr("data-feedback-selected",e(this).val())}),t.find(".epkb-deactivate-feedback-dialog-input:checked").trigger("change")}})}return t}},sendFeedback:function(){var t=this.cache.$dialogForm.serialize();this.getModal().getElements("submit").text("").addClass("epkb-loading"),e.post(ajaxurl,t,this.deactivate.bind(this))},init:function(){this.initModal(),this.cacheElements(),this.bindEvents()}};e(function(){t.init()})}(jQuery);